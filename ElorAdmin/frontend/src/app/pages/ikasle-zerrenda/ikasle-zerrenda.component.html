<app-megamenu></app-megamenu>
<div id="taulaErabiltzaileak">
  <p-table
    #dt
    [value]="filteredUsers"
    [paginator]="true"
    [rows]="10"
    [first]="first"
    [showCurrentPageReport]="true"
    [tableStyle]="{ 'min-width': '50rem' }"
    [currentPageReportTemplate]="'entries-report' | translate"
    [globalFilterFields]="[
      'erabiltzaile.dni',
      'erabiltzaile.nombre',
      'erabiltzaile.apellidos'
    ]"
    (onPage)="pageChange($event)"
    [rowsPerPageOptions]="[10, 25, 50]"
  >
    <ng-template #header>
      <tr>
        <th>{{ "dni" | translate }}</th>
        <th>{{ "name" | translate }}</th>
        <th>{{ "surname" | translate }}</th>
        <th>{{ "curso" | translate }}</th>
        <th>{{ "photo" | translate }}</th>
      </tr>
      <tr>
        <th>
          <input type="text" [(ngModel)]="filters.dni" (keydown.enter)="applyFilter()" />
        </th>
        <th>
          <input type="text" [(ngModel)]="filters.nombre" (keydown.enter)="applyFilter()" />
        </th>
        <th>
          <input type="text" [(ngModel)]="filters.apellidos" (keydown.enter)="applyFilter()" />
        </th>
        <th>
          <input type="text" [(ngModel)]="filters.ciclo" (keydown.enter)="applyFilter()" />
        </th>
      </tr>
    </ng-template>
    <ng-template #body let-erabiltzaile>
      <tr>
        <td>{{ erabiltzaile.dni }}</td>
        <td>{{ erabiltzaile.nombre }}</td>
        <td>{{ erabiltzaile.apellidos }}</td>
        <td>{{ getCiclo(erabiltzaile.id!) }}</td> 
        <td>
          <p-avatar
            [image]="erabiltzaile | argazki"
            size="large"
            shape="circle"
          >
          </p-avatar>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
